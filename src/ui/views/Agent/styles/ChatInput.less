@import '~@/ui/style/var.less';

.chat-input-form {
  overflow: hidden;
  border-radius: 6px;
  border: 1px solid @color-border;
  transition: border-color 0.2s;
  position: relative;
  z-index: 1;
  
  &:hover:not(.disabled) {
    border-color: @primary-color;
  }
  
  &:focus-within:not(.disabled) {
    border-color: @primary-color;
  }
  
  &.disabled {
    cursor: not-allowed;
    
    * {
      pointer-events: none;
    }
  }
  
  &:not(.disabled) {
    * {
      pointer-events: auto;
    }
  }
  
  .input-container {
    display: flex;
    flex-direction: column;
    
    .textarea {
      width: 100%;
      resize: none;
      border: none;
      padding: 8px;
      background: @color-white;
      color: @color-title;
      outline: none;
      pointer-events: auto;
      position: relative;
      z-index: 1;
      
      &:disabled {
        cursor: not-allowed;
        background: @color-bg;
        color: @color-comment;
        pointer-events: none;
      }
      
      &::placeholder {
        color: @color-comment;
      }
    }
    
    .controls-area {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 8px;
      background: @color-white;
      
      &.disabled {
        background: @color-bg;
      }
      
      .left-controls {
        display: flex;
        gap: 8px;
        color: @color-comment;
        
        .mic-button {
          border-radius: 4px;
          padding: 6px;
          transition: all 0.2s;
          border: none;
          background: none;
          cursor: pointer;
          pointer-events: auto;
          position: relative;
          z-index: 2;
          
          &:disabled {
            cursor: not-allowed;
            opacity: 0.5;
            pointer-events: none;
          }
          
          &.recording {
            background: @color-red;
            color: @color-white;
            
            &:hover {
              background: #d63946;
            }
          }
          
          &:not(.recording):not(:disabled):hover {
            background: @color-bg;
            color: @color-body;
          }
          
          .mic-icon {
            height: 16px;
            width: 16px;
            
            &.processing {
              animation: spin 1s linear infinite;
            }
            
            &.recording {
              animation: pulse 1s ease-in-out infinite;
            }
          }
        }
      }
      
      .action-button {
        border-radius: 4px;
        padding: 4px 12px;
        color: @color-white;
        transition: background-color 0.2s;
        border: none;
        cursor: pointer;
        pointer-events: auto;
        position: relative;
        z-index: 2;
        
        &:disabled {
          cursor: not-allowed;
          opacity: 0.5;
          pointer-events: none;
        }
        
        &.send-button {
          background: #19C2FF;
          
          &:not(:disabled):hover {
            background: #0073DC;
          }
        }
        
        &.stop-button {
          background: @color-red;
          
          &:not(:disabled):hover {
            background: #d63946;
          }
        }
        
        &.replay-button {
          background: @color-green;
          
          &:not(:disabled):hover {
            background: #1e9d72;
          }
        }
      }
    }
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}